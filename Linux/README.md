# Linux

---

* [List all users](#184c9060-aaf3-48ce-8ee2-b3764dfc0a40)
* [Show my user ID](#17829576-f326-4aa7-8a7c-a950d805af66)
* [Show groups I’m a member of](#6183cc47-221e-4d92-9bdf-bb3503a2ab02)
* [Show details about me](#52f6a138-36cf-4444-8a16-f07e02a23a0a)
* [Add group](#8867ed73-4434-4753-9784-f698fdb69bc3)
* [Add user or add user to group](#21c7da46-7014-45e7-bb10-d6c307362b37)
* [List all groups](#1a7e2018-7040-45de-a134-e11860c8ee5d)
* [Delete user or remove user from group](#b54ab9b2-b850-4f36-ada6-3a510654d3a8)
* [Change my password](#3f4d4152-b036-4f4a-aab9-880e5e8b29a2)
* [Show what commands I can sudo](#627f0356-e8b6-479c-a8fe-d42ad555c1ed)
* [Give user ability to run all commands with sudo](#928fb107-a46d-4a1c-9932-31735f16ddcc)
* [Switch user](#fa7ee5d3-7bb3-40b7-9ba1-4193ca53d353)
* [Super user do (run as root)](#c885b94e-f61d-4eb3-ada0-d1104fd52f25)
* [Display user info](#0a121353-92c7-4237-96c5-31084cc2a558)
* [List directory contents](#c928fcd2-093c-46f9-95b2-9d045517b074)
* [Show hidden files and directories](#0675a8d3-a7fa-42c6-8d65-a3a4bf728b60)
* [Probably the most useful version of ls for general purposes](#0275a834-4eea-4fbb-9cb3-139f5101c63b)
* [Delete directory that isn’t empty](#40ce181a-83f2-4e4c-9abd-9fec1ab8efc6)
* [Show free space](#ef017fda-ac34-4443-8a29-3881dd59657a)
* [Display text file contents](#47217e58-ca90-4adb-a784-f1dd3741aacc)
* [Change directory](#673b2dac-6f30-496d-be01-919ffad34c63)
* [Show current directory](#d0eadac2-e43b-4585-9b11-4ab01972a9d7)
* [Clear console](#838b87a6-98a9-474e-855a-111254f31c94)
* [Remove a file or directory](#54cf85d9-9572-482f-81b4-057c0257c485)
* [Create new empty file or change timestamp of existing file](#7fd3aa85-cae5-40cd-a659-9e4497d7d37e)
* [Watch a file as it changes](#12dde410-55d4-48bb-85a6-6c46ae415b1c)
* [Search a file for text string](#1180bff9-b98b-4b76-8945-cb3cd33c9061)
* [Change group owner of a file or directory](#083803e5-6cef-447a-a21b-f744479dfa2e)
* [Change permissions of a file or directory](#656c0cae-af96-4a3d-b1b4-a5c828066550)
* [Get chmod numeric value of an existing file](#a3950bb4-852f-4abb-bf98-d3ed99789769)
* [Change user owner of a file or directory (can change group too)](#a7acaff3-e49d-497b-8cd5-7b4045262cd9)
* [ Edit a text file](#b05439db-a082-4b38-ba95-be5c57baaf79)
* [Display rights of a file in numeric format](#932f5a9b-a1e9-4940-b475-f96797659b35)
* [Mount a Windows share](#be2ca3ed-6d06-4434-b433-047fc04199bc)
* [To ensure a Windows share is reconnected at boot, add an entry to **/etc/fstab**](#44ef34d5-586b-4a3b-b122-cfb2ecb88b08)
* [Generate an RSA keypair](#4ef5eb08-6970-49d7-9ab4-7c582b85259f)
* [View files between certain date/times](#d45cc41e-a7c2-4214-a71f-f406f71f6d03)
* [Set access/modify/timestamp date/time on all files in directory to a specific date/time](#f576126a-80d4-4c50-8f65-7c25ea057591)
* [Create TAR](#030b36e3-0ad9-4c0f-955a-1a75f85249a2)
* [Extract TAR](#4b35b79b-0958-494a-bb06-565219226e58)
* [Unzip ZIP archive](#4f619208-eeb8-492c-8cff-04f7549e9c08)
* [List all commands you could run](#d481912e-4c9f-4a71-b3c5-273dbd438d8d)
* [List all aliases you could run](#152479eb-c3a3-4e29-94bb-1ecb80eb0ad7)
* [List all built-ins you could run](#c8c67d86-c0ab-4d2f-9eac-73bb2402330d)
* [List all keywords you could run](#001a960e-aecc-4b5d-bafe-6d11abc16c42)
* [List all functions you could run](#907fad51-f7ad-4264-85fb-830746870f08)
* [List all the above in one go](#b6549101-b58e-4e28-a3f3-7f35fc185613)
* [Show processes listening on ports](#3bd7f2c7-a251-4f6d-9a04-4e76e10854a7)
* [Process info](#ddc04a05-8fd9-448e-a147-2cd6f0958499)
* [Get status of a service](#3af37f91-2fc2-4e93-89cc-4493558e4691)
* [Show shell history](#bde74131-e164-4be1-9e90-91a3f80e7962)
* [Clear ALL shell history](#520a3dcc-fdfd-43d4-80da-9ad1c8f03abe)
* [Clear one specific history item](#d3f1e710-8078-4d2e-b9d1-121f3800884b)
* [List all packages installed directly and runnable](#8d792466-c542-4c3e-b535-83f94481f0b8)
* [View systemd logs](#e4407019-480e-4cb3-ab0c-49c2180021da)
* [Get IP address](#de35fe13-9817-4a91-a32f-a699fd26c1e4)
* [Referring to arguments](#656422c7-7357-4377-8ccd-5c26db0c213c)
* [Conditional statement](#0e7e94ab-9d2e-422b-9230-77f390831ecf)
* [Number comparison](#23783372-4279-433c-ab18-a5744d364b3f)
* [Test for file properties](#70fa4336-9840-460a-802a-af9fd0acb79b)
* [Boolean logic operators](#87c4e8f0-80e8-41b7-bca2-48c4b1bd8624)
* [Multilevel conditional](#f0df9845-cfa1-4e9c-91b5-57061e2568d2)
* [For loop](#1b6b9f0c-82f0-4913-8451-fe4d1fd43b1b)
* [While loop](#2acc1723-8a02-458c-a423-fc054d4ad3c6)
* [Case statement](#c51eab49-0794-44be-a6fd-bf106e2658f8)
* [Read keyboard input](#5870bb2a-ca4c-4407-a079-808d8a4721ae)
* [Define a function](#517d82f6-1457-45b7-a129-2514c0aba809)
* [Install KDE and switchdesk to be able to make it default](#9b3b1823-ac07-4a59-964f-9d3e3d5e3b44)
* [GPG key errors during yum install or yum update](#c0734290-11c6-4e3c-aab6-b869210cb3bf)
* [Get active firewall zone](#c374b672-3ef8-4e7e-8251-e4715c8cc4ff)
* [List firewall services on a zone](#89d5ae1c-b4f4-4946-b278-7dced366d8d9)
* [Add a firewall rule](#12ea115f-1b92-4333-99b1-a7d139f1b584)
* [Restart firewall after changes](#039489d2-93fd-4acb-b841-768551242fc6)
* [Setting up a mount point to a Windows share](#6a58ba6d-127e-4fd3-a72a-5e2c4bb78364)
* [Yum manual installation](#a7ea5381-cf72-49cf-85eb-9c13cb3552d7)
* [Set default system text editor](#396227e5-0e46-4af6-824a-c22599870e2b)
* [Change default version of Python](#52f5542e-5379-4c22-b325-19a15479ee79)
* [Add EPEL repo for extra apps](#87842e84-1027-4449-bb37-da1084b56fb5)
* [Doing yum update shows “This system is not registered with an entitlement server. You can use subscription-manager to register.”](#8ae5fb64-cfc8-420a-85f9-d924ff967523)
* [Enable a service to start on boot](#b8b4c3bd-b695-4e66-b8c1-a75f6e176438)
* [Disable a service from starting on boot](#1fa5da33-2ef9-4be2-8656-cfef657771ac)
* [See if a service is configured to start on boot](#ed129391-9d57-4367-b3d8-412b0c9e9370)
* [List all services](#2808f196-0220-4500-ba75-a61145a2776f)
* [List only running services (or another state)](#eb7497aa-be61-4fa2-9a72-2e026441c3ce)
* [To add a cron job](#f3371451-0a12-48ef-90c5-5098a277fda0)
* [To back up all jobs](#855b8be8-ff48-4ab6-bf1c-6839c6c8e7dc)
* [To restore from backup](#65a025ca-dfc8-43c4-845e-b9561abe4f0b)
* [To list all jobs](#f16e0f2b-69e7-4846-9921-2aaa748c72e8)
* [List enabled units](#2bf6d435-f141-41de-a031-140360b2efc2)
* [View currently active targets](#2549c26d-40b2-417c-b895-127116297f53)
* [Create unit file in /etc/systemd/system named <name>.service, example](#813170ce-00c8-45d9-8c14-c1c7601d3372)
* [Vi quick reference](#3bcc9f07-cc63-416b-9887-a936ca29cd77)
* [Important Locations](#29731de3-e3eb-4f70-9f75-b7af4b3d4e4c)
* [CURL upload file](#3fbe1d7d-11a8-48d6-8a36-cafb88b95f3a)
* [CURL download file](#5b92d990-64c2-45ee-8f7c-6ed6a8765c8b)
* [CURL delete file](#2fe43d10-c042-4527-841a-2f148b8ac654)
* [How to verify the integrity of a directory full of JPG files and only show those that aren't uncorrupted](#f977a3ff-8cff-4cd6-92f7-e1196f1f342d)
* [Show information about all videos in the current directory and send to a file](#701bf964-5d64-416e-b045-eed41e54dad8)
* [Read mail](#b6eb75b1-ac70-49e0-bf16-0d9221eecca5)
* [Delete all mail (when inside mail already)](#a267ab49-f339-46d7-aa3b-c48956752151)
* [Sometimes, copying a file from Windows to Linux will cause problems with line terminators](#80656755-a555-4138-93ab-2995d32294fc)
* [How to send an email from the command line (low level)](#19058754-59c7-42c5-9082-c095c8a01029)
* [Download an entire site with wget](#e527e525-c611-4d2e-b4f5-863a59f9d63d)
* [Download a list of URLs from a file while maintaining directory structure with wget](#ecc15601-e277-47e9-a5dc-f774fc95856f)
* [Set up an SFTP server](#613a1e17-1636-45b7-ad23-0df92b0f41c1)
* [Compare two files line by line and list any lines in each not in the other](#b17ab9d3-19bf-411e-93b6-00341817e222)

---




<div id="184c9060-aaf3-48ce-8ee2-b3764dfc0a40">

## List all users

</div>

    cat /etc/passwd




<div id="17829576-f326-4aa7-8a7c-a950d805af66">

## Show my user ID

</div>

    whoami




<div id="6183cc47-221e-4d92-9bdf-bb3503a2ab02">

## Show groups I’m a member of

</div>

    groups




<div id="52f6a138-36cf-4444-8a16-f07e02a23a0a">

## Show details about me

</div>

    id




<div id="8867ed73-4434-4753-9784-f698fdb69bc3">

## Add group

</div>

    addgroup




<div id="21c7da46-7014-45e7-bb10-d6c307362b37">

## Add user or add user to group

</div>

    adduser




<div id="1a7e2018-7040-45de-a134-e11860c8ee5d">

## List all groups

</div>

    compgen -g




<div id="b54ab9b2-b850-4f36-ada6-3a510654d3a8">

## Delete user or remove user from group

</div>

    deluser




<div id="3f4d4152-b036-4f4a-aab9-880e5e8b29a2">

## Change my password

</div>

    passwd




<div id="627f0356-e8b6-479c-a8fe-d42ad555c1ed">

## Show what commands I can sudo

</div>

    sudo -l




<div id="928fb107-a46d-4a1c-9932-31735f16ddcc">

## Give user ability to run all commands with sudo

</div>

* Switch to root, then run **visudo**
* Find where it says **root ALL=(ALL) ALL**
* Type "o" to insert a new line below it
* Now type what you want to insert, like: **\<username> ALL=(ALL) ALL** (use tabs instead of spaces)
* Hit ESC to exit insert-mode
* Type **:x** to save and exit




<div id="fa7ee5d3-7bb3-40b7-9ba1-4193ca53d353">

## Switch user

</div>

    su




<div id="c885b94e-f61d-4eb3-ada0-d1104fd52f25">

## Super user do (run as root)

</div>

    sudo




<div id="0a121353-92c7-4237-96c5-31084cc2a558">

## Display user info

</div>

    id <username, optional>




<div id="c928fcd2-093c-46f9-95b2-9d045517b074">

## List directory contents

</div>

    ls




<div id="0675a8d3-a7fa-42c6-8d65-a3a4bf728b60">

## Show hidden files and directories

</div>

    ls -al




<div id="0275a834-4eea-4fbb-9cb3-139f5101c63b">

## Probably the most useful version of ls for general purposes

</div>

    ls -lha




<div id="40ce181a-83f2-4e4c-9abd-9fec1ab8efc6">

## Delete directory that isn’t empty

</div>

    rm -r <dir>




<div id="ef017fda-ac34-4443-8a29-3881dd59657a">

## Show free space

</div>

    df -h




<div id="47217e58-ca90-4adb-a784-f1dd3741aacc">

## Display text file contents

</div>

    cat




<div id="673b2dac-6f30-496d-be01-919ffad34c63">

## Change directory

</div>

    cd




<div id="d0eadac2-e43b-4585-9b11-4ab01972a9d7">

## Show current directory

</div>

    pwd




<div id="838b87a6-98a9-474e-855a-111254f31c94">

## Clear console

</div>

    clear




<div id="54cf85d9-9572-482f-81b4-057c0257c485">

## Remove a file or directory

</div>

    rm




<div id="7fd3aa85-cae5-40cd-a659-9e4497d7d37e">

## Create new empty file or change timestamp of existing file

</div>

    touch




<div id="12dde410-55d4-48bb-85a6-6c46ae415b1c">

## Watch a file as it changes

</div>

    tail




<div id="1180bff9-b98b-4b76-8945-cb3cd33c9061">

## Search a file for text string

</div>

    grep

Examples:

* Search for a string inside a given file:

      grep <string> <filename>

* Search for a string inside all files in a directory:

      grep <string> *

* Search for a string in all files in a directory with the subdirectories recursed:

      grep -r <string> *

* Search for a string (case insensitive):

      grep -i <string> <file>

To any of these, you can add *| {less|more}* to the end for better viewing.




<div id="083803e5-6cef-447a-a21b-f744479dfa2e">

## Change group owner of a file or directory

</div>

    chgrp




<div id="656c0cae-af96-4a3d-b1b4-a5c828066550">

## Change permissions of a file or directory

</div>

    chmod




<div id="a3950bb4-852f-4abb-bf98-d3ed99789769">

## Get chmod numeric value of an existing file

</div>

    stat --format '%a' <filename>




<div id="a7acaff3-e49d-497b-8cd5-7b4045262cd9">

## Change user owner of a file or directory (can change group too)

</div>

    chown




<div id="b05439db-a082-4b38-ba95-be5c57baaf79">

### Edit a text file

</div>

* mcedit
* joe
* nano

(or **vi** or **emacs*, of course, but I prefer any of those others, in the order shown above)




<div id="932f5a9b-a1e9-4940-b475-f96797659b35">

## Display rights of a file in numeric format

</div>

    stat -c %a <file_or_directory_name>




<div id="be2ca3ed-6d06-4434-b433-047fc04199bc">

## Mount a Windows share

</div>

* First, make sure Samba and CIFS-utils are installed
* Then, add an entry to */etc/fstab*:

        //<unc_path_to_share> /mnt/<name_of_mount_point> cifs username=<username>,password=<password> 0 0

* Then, ensure the mount point is created (i.e., **mkdir /mnt/\<name_of_mount_point>**)
* Execute **mount -a** to add the mount point, then it should work




<div id="44ef34d5-586b-4a3b-b122-cfb2ecb88b08">

## To ensure a Windows share is reconnected at boot, add an entry to **/etc/fstab**

</div>

    //<hostname>/<sharename>   <mount_point>    cifs    username=<username>,password=<password> 0 0




<div id="4ef5eb08-6970-49d7-9ab4-7c582b85259f">

## Generate an RSA keypair

</div>

    ssh-keygen -t rsa -b 4096




<div id="d45cc41e-a7c2-4214-a71f-f406f71f6d03">

## View files between certain date/times

</div>

    find -type f -newermt "2011-12-22 00:00:00" \! -newermt "2011-12-24 13:23:00"




<div id="f576126a-80d4-4c50-8f65-7c25ea057591">

## Set access/modify/timestamp date/time on all files in directory to a specific date/time

</div>

    touch -a -m -t 202205171500.00 *




<div id="030b36e3-0ad9-4c0f-955a-1a75f85249a2">

## Create TAR

</div>

    tar -czvf <tar_filename>.tar.gz <target_directory>




<div id="4b35b79b-0958-494a-bb06-565219226e58">

## Extract TAR

</div>

    tar xvf <tar_filename>.tar.gz




<div id="4f619208-eeb8-492c-8cff-04f7549e9c08">

## Unzip ZIP archive

</div>

    unzip <filename> "<file_to_extract>" -d <target_directory>

<file_to_extract> is optional, without it all files in archive will be extracted



<div id="d481912e-4c9f-4a71-b3c5-273dbd438d8d">

## List all commands you could run

</div>

    compgen -c




<div id="152479eb-c3a3-4e29-94bb-1ecb80eb0ad7">

## List all aliases you could run

</div>

    compgen -a




<div id="c8c67d86-c0ab-4d2f-9eac-73bb2402330d">

## List all built-ins you could run

</div>

    compgen -b




<div id="001a960e-aecc-4b5d-bafe-6d11abc16c42">

## List all keywords you could run

</div>

    compgen -k




<div id="907fad51-f7ad-4264-85fb-830746870f08">

## List all functions you could run

</div>

    compgen -A




<div id="b6549101-b58e-4e28-a3f3-7f35fc185613">

## List all the above in one go

</div>

    compgen -A function -abck




<div id="3bd7f2c7-a251-4f6d-9a04-4e76e10854a7">

## Show processes listening on ports

</div>

    netstat -tupln




<div id="ddc04a05-8fd9-448e-a147-2cd6f0958499">

## Process info

</div>
* List currently running: **ps**
* Stop a process: **kill**
* Find out about all running processes: **ps -ag**
* Process manager: **top**




<div id="3af37f91-2fc2-4e93-89cc-4493558e4691">

## Get status of a service

</div>

    service <service_name> status




<div id="bde74131-e164-4be1-9e90-91a3f80e7962">

## Show shell history

</div>

    history




<div id="520a3dcc-fdfd-43d4-80da-9ad1c8f03abe">

## Clear ALL shell history

</div>

    history -c




<div id="d3f1e710-8078-4d2e-b9d1-121f3800884b">

## Clear one specific history item

</div>

    history -d <item>




<div id="8d792466-c542-4c3e-b535-83f94481f0b8">

## List all packages installed directly and runnable

</div>

Assuming an APT-based system (like Ubuntu), you can do this in two steps.  First, do:

    apt install aptitude

...and then...

    aptitude search '~i!~M'




<div id="e4407019-480e-4cb3-ab0c-49c2180021da">

## View systemd logs

</div>

    journalctl




<div id="de35fe13-9817-4a91-a32f-a699fd26c1e4">

## Get IP address

</div>

    ipaddr

...or...

    ifconfig -a




<div id="656422c7-7357-4377-8ccd-5c26db0c213c">

## Referring to arguments

</div>

    $1, $2

...and so on. Note: **$0** is your script name.




<div id="0e7e94ab-9d2e-422b-9230-77f390831ecf">

## Conditional statement

</div>

    if {condition} then ... fi




<div id="23783372-4279-433c-ab18-a5744d364b3f">

## Number comparison

</div>

    -eq, -ne, -lt, -le, -gt, -ge




<div id="70fa4336-9840-460a-802a-af9fd0acb79b">

## Test for file properties

</div>

* **-s \<filename>** tells you if the file is not empty
* **-f \<filename>** tells you whether the argument is a file and not a directory
* **-d \<filename>** tests if the argument is a directory, and not a file
* **-w \<filename>** tests for writeability
* **-r \<filename>** tests for readability
* **-x \<filename>** tests for executability




<div id="87c4e8f0-80e8-41b7-bca2-48c4b1bd8624">

## Boolean logic operators

</div>

* **!** tests for logical not
* **-a** tests for logical and
* **-o** tests for logical or




<div id="f0df9845-cfa1-4e9c-91b5-57061e2568d2">

## Multilevel conditional

</div>

    if {condition} then {statement} elif {condition} {statement} fi




<div id="1b6b9f0c-82f0-4913-8451-fe4d1fd43b1b">

## For loop

</div>

    for {variable name} in {list} do {statement} done




<div id="2acc1723-8a02-458c-a423-fc054d4ad3c6">

## While loop

</div>

    while {condition} do {statement} done




<div id="c51eab49-0794-44be-a6fd-bf106e2658f8">

## Case statement

</div>

    case {variable} in {possible-value-1}) {statement};; {possible-value-2}) {statement};; esac




<div id="5870bb2a-ca4c-4407-a079-808d8a4721ae">

## Read keyboard input

</div>

    read {variable-name}




<div id="517d82f6-1457-45b7-a129-2514c0aba809">

## Define a function

</div>

    function-name() { #some code here return }




<div id="9b3b1823-ac07-4a59-964f-9d3e3d5e3b44">

## Install KDE and switchdesk to be able to make it default

</div>

Note: Probably Fedora-specific

    dnf install @kde-desktop-environment
    dnf install switchdesk switchdesk-gui

You can then either run the Desktop Switching Tool GUI, or from command line: **switchdesk kde**




<div id="c0734290-11c6-4e3c-aab6-b869210cb3bf">

## GPG key errors during yum install or yum update

</div>

Note: Probably CentOS-specific

If you get errors doing a yum install or yum update that talks about GPG keys not being valid, one (VERY UNSAFE!)
way to get around it is to go into the /etc/yum.conf file and set gpgcheck=0 in the [main] section.  You may also
need to go into the .conf files for individual repos under /etc/yum.repos.d and set it there as well, and note that
those repo files can have multiple entries that you need to set.  A value of 0 means no key checks, 1 means check
keys.  THIS SHOULD ONLY BE A SHORT-TERM FIX, since you open yourself up to malicious packages without key checking.




<div id="c374b672-3ef8-4e7e-8251-e4715c8cc4ff">

## Get active firewall zone

</div>

Note: Probably CentOS-specific

    firewall-cmd --get-active-zones




<div id="89d5ae1c-b4f4-4946-b278-7dced366d8d9">

## List firewall services on a zone

</div>

Note: Probably CentOS-specific

    firewall-cmd --zone=<zone> --list-all




<div id="12ea115f-1b92-4333-99b1-a7d139f1b584">

## Add a firewall rule

</div>

Note: Probably CentOS-specific

    firewall-cmd --permanent --zone=<zone> --add-port=<port>/<type=tcp|udp>




<div id="039489d2-93fd-4acb-b841-768551242fc6">

## Restart firewall after changes

</div>

Note: Probably CentOS-specific

    systemctl restart firewalld.service




<div id="6a58ba6d-127e-4fd3-a72a-5e2c4bb78364">

## Setting up a mount point to a Windows share

</div>

Note: Probably CentOS-specific

    yum install samba samba-client cifs-utils
    mkdir /mnt/<mount_point>
    mount.cifs //<server_name>/<share_name> <mount_point> -o user=<username> pass=<password>




<div id="a7ea5381-cf72-49cf-85eb-9c13cb3552d7">

## Yum manual installation

</div>

Note: Probably CentOS-specific

If files can’t be downloaded by yum for some reason, you can manually download them and then put them in:

    /var/cache/yum/x86_64/7/*/packages

Yum will use them as if it had downloaded the RPM itself.




<div id="396227e5-0e46-4af6-824a-c22599870e2b">

## Set default system text editor

</div>

Note: Probably CentOS-specific

    echo "set nowrap" >>/etc/nanorc
    cat <<EOF >>/etc/profile.d/nano.sh
    export VISUAL="nano"
    export EDITOR="nano"
    EOF




<div id="52f5542e-5379-4c22-b325-19a15479ee79">

## Change default version of Python

</div>

Note: Probably CentOS-specific

    alternatives --install /usr/bin/python python /usr/bin/python3.6 2
    alternatives --install /usr/bin/python python /usr/bin/python2.7 1

Assuming you have Python2 and Python3 installed, and they are at those versions, setting Python3 to a higher priority (2) makes it default.  Now, **python –version** will show 3.6.




<div id="87842e84-1027-4449-bb37-da1084b56fb5">

## Add EPEL repo for extra apps

</div>

Note: Probably CentOS-specific

    yum install epel-release




<div id="8ae5fb64-cfc8-420a-85f9-d924ff967523">

## Doing yum update shows “This system is not registered with an entitlement server. You can use subscription-manager to register.”

</div>

Note: Probably CentOS-specific

How to get rid of it:

    mcedit /etc/yum/pluginconf.d/subscription-manager.conf
    Set enabled=0
 



<div id="b8b4c3bd-b695-4e66-b8c1-a75f6e176438">

## Enable a service to start on boot

</div>

    systemctl enable <service_name>




<div id="1fa5da33-2ef9-4be2-8656-cfef657771ac">

## Disable a service from starting on boot

</div>

    systemctl disable <service_name>




<div id="ed129391-9d57-4367-b3d8-412b0c9e9370">

## See if a service is configured to start on boot

</div>

    chkconfig <service_name>




<div id="2808f196-0220-4500-ba75-a61145a2776f">

## List all services

</div>

    systemctl




<div id="eb7497aa-be61-4fa2-9a72-2e026441c3ce">

## List only running services (or another state)

</div>

    systemctl –state=<state>




<div id="f3371451-0a12-48ef-90c5-5098a277fda0">

## To add a cron job

</div>

    crontab -e

Add entry, for example:

    0 5 * * * /~/backup_process.sh > /~/backup_process.log

(that will execute the specified shell script at 5am every day with output to the specified log file)




<div id="855b8be8-ff48-4ab6-bf1c-6839c6c8e7dc">

## To back up all jobs

</div>

    crontab -l > my_cron_backup.txt




<div id="65a025ca-dfc8-43c4-845e-b9561abe4f0b">

## To restore from backup

</div>

    crontab my_cron_backup.txt
    crontab -l




<div id="f16e0f2b-69e7-4846-9921-2aaa748c72e8">

## To list all jobs

</div>

    crontab -l




<div id="2bf6d435-f141-41de-a031-140360b2efc2">

## List enabled units

</div>

    systemctl list-unit-files | grep enabled




<div id="2549c26d-40b2-417c-b895-127116297f53">

## View currently active targets

</div>

    systemctl list-units --type target




<div id="813170ce-00c8-45d9-8c14-c1c7601d3372">

## Create unit file in /etc/systemd/system named <name>.service, example

</div>

    [Unit]
    Description=Start all containers at boot
    After=timers.target
    [Service]
    Type=idle
    ExecStart=/root/start_all.sh
    TimeoutStartSec=0
    [Install]
    WantedBy=default.target

Enable unit by reloading systemd daemon:

    systemctl daemon-reload

Enable new service to start automatically at boot:

    systemctl enable <name>.service

Start the service:

    systemctl start <name>.service

Reboot and confirm:

    systemctl reboot
 



<div id="3bcc9f07-cc63-416b-9887-a936ca29cd77">

## Vi quick reference

</div>

* Remember that you start out in normal mode.  Press **i** to enter insert mode, where you can then type.
* Hit ESC to get back into normal mode.
* In normal mode, commands are triggered by hitting **:** first (which moves cursor to bottom of screen) and then some command like **q** or **i*.




<div id="29731de3-e3eb-4f70-9f75-b7af4b3d4e4c">

## Important Locations

</div>

* User list: **/etc/passwd**
* User passwords: **/etc/shadow**
* Group list: **/etc/group**




<div id="3fbe1d7d-11a8-48d6-8a36-cafb88b95f3a">

## CURL upload file

</div>

    curl -f -v -u <username>:<password> --upload-file <filename> "<path>/<filename>"




<div id="5b92d990-64c2-45ee-8f7c-6ed6a8765c8b">

## CURL download file

</div>

    curl "<path>/<filename>" --output <filename>




<div id="2fe43d10-c042-4527-841a-2f148b8ac654">

## CURL delete file

</div>

    curl -f -v -u <userID>:<password> -X DELETE "<path>/<filename>"

<filename> is optional, but be careful, without it the entire directory is deleted




<div id="f977a3ff-8cff-4cd6-92f7-e1196f1f342d">

## How to verify the integrity of a directory full of JPG files and only show those that aren't uncorrupted

</div>

    jpeginfo -c -v /<directory_name>/*.jpg | awk '$0 !~ /\[OK\]/'




<div id="701bf964-5d64-416e-b045-eed41e54dad8">

## Show information about all videos in the current directory and send to a file

</div>

    exiftool * > videoinfo.txt




<div id="b6eb75b1-ac70-49e0-bf16-0d9221eecca5">

## Read mail

</div>

    mail




<div id="a267ab49-f339-46d7-aa3b-c48956752151">

## Delete all mail (when inside mail already)

</div>

    delete *




<div id="80656755-a555-4138-93ab-2995d32294fc">

## Sometimes, copying a file from Windows to Linux will cause problems with line terminators

</div>

To fix this:

    vi /<filename>
    :set ff=unix
    :wq

Or, just use dos2unix if installed.




<div id="19058754-59c7-42c5-9082-c095c8a01029">

## How to send an email from the command line (low level)

</div>

    telnet <server – can be localhost> 25
    HELO <domain>
    MAIL FROM: <address>
    RCPT TO: <address>
    DATA
    Test




<div id="e527e525-c611-4d2e-b4f5-863a59f9d63d">

## Download an entire site with wget

</div>

    wget --recursive --no-clobber --page-requisites --html-extension --convert-links --restrict-file-names=windows --no-parent --domains <domain_name> <website_url>




<div id="ecc15601-e277-47e9-a5dc-f774fc95856f">

## Download a list of URLs from a file while maintaining directory structure with wget

</div>

    wget -x -nH -i <filename>




<div id="613a1e17-1636-45b7-ad23-0df92b0f41c1">

## Set up an SFTP server

</div>
* Add group for SFTP users: **groupadd <group_name_whatever_you_want>**
* Add a user: **useradd -g <group_name_from_above> <username>**
* Set password: **<whatever_you_want>**
* Create SFTP home directory for user: **mkdir -p /sftp_data/sftp_user/upload**
* Set privs on directory part 1: **chown -R root.sftp_users /sftp_data/sftp_user**
* Set privs on directory part 2: **chown -R sftp_user.sftp_users /sftp_data/sftp_user/upload**
* Edit **/etc/ssh/sshd_config**, add to bottom:

      Match Group sftp_users
      ChrootDirectory /sftp_data/%u
      ForceCommand internal-sftp

* Start daemon: **service ssh start**




<div id="b17ab9d3-19bf-411e-93b6-00341817e222">

## Compare two files line by line and list any lines in each not in the other

</div>

    comm -3 <(sort file1.txt) <(sort file2.txt)
